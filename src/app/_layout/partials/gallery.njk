<section id="gallery" class="dark">
    <div class="section-heading">
        <h1><%= nav.gallery %></h1>
    </div>
    <div class="container">
        <div id="gallery-carousel" class="carousel slide" data-ride="carousel" data-touch="true">
            <div class="carousel-inner">
                {% for category in galleryData %}
                {% set outer_loop = loop %}
                {% for image in category.images %}
                <div class="carousel-item img-fluid {{'active' if outer_loop.first and loop.first}}" data-category="{{category.nameI18nKey}}">
                    <div class="gallery-image-container">
                        <a class="gallery-image-link" href="{{image.original}}">
                            <img class="gallery-image gallery-image-loader"
                                 data-loader="{{image.loader}}"
                                 data-src="{{image.view}}"
                                 data-srcset="{{image.view}} 800w, {{image.view2x}} 1600w, {{image.view3x}} 2400w"
                                 data-sizes="100vw"
                                 alt="{{image.alt}}">
                        </a>
                    </div>
                </div>
                {% endfor %}
                {% endfor %}
            </div>
            <a class="carousel-control-prev" href="#gallery-carousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </a>
            <a class="carousel-control-next" href="#gallery-carousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon"></span>
            </a>
        </div>
        <div class="row justify-content-center">
            {% for index in galleryIndex %}
            <div class="col-xl-2 col-lg-2 col-md-2 col-sm-2 col-4">
                <a href="#gallery-carousel" class="gallery-index-link {{'selected' if loop.first}}" data-category="{{index.nameI18nKey}}" data-target="#gallery-carousel" data-slide-to="{{index.index}}">
                    <div class="gallery-index-link-image {{index.nameI18nKey}}">
                        {% switch index.nameI18nKey %}
                        {% case 'gettingready' %}
                        {% set thumb_src = 'Portugal-Wedding-Photography-Mira-Joao-0128' %}
                        {% case 'ceremony' %}
                        {% set thumb_src = 'Portugal-Wedding-Photography-Mira-Joao-0434' %}
                        {% case 'couple' %}
                        {% set thumb_src = 'Portugal-Wedding-Photography-Mira-Joao-0451' %}
                        {% case 'cocktail' %}
                        {% set thumb_src = 'Portugal-Wedding-Photography-Mira-Joao-0544' %}
                        {% case 'dinner' %}
                        {% set thumb_src = 'Portugal-Wedding-Photography-Mira-Joao-0836' %}
                        {% case 'party' %}
                        {% set thumb_src = 'Portugal-Wedding-Photography-Mira-Joao-0877' %}
                        {% endswitch %}
                        {% set thumb_src = '/gallery/' + index.nameI18nKey + '/' + thumb_src + '-thumbnail' %}
                        <img src="{{thumb_src}}.jpg"
                             srcset="{{thumb_src}}.jpg 800w, {{thumb_src}}-2x.jpg 1600w, {{thumb_src}}-3x.jpg 2400w"
                             sizes="100vw"
                             alt="<%= gallery.{{index.nameI18nKey}} %>">
                    </div>
                    <div class="gallery-index-link-text">
                        <%= gallery.{{index.nameI18nKey}} %>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>